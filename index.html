<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üö® R6_FLASHBANG_MAX_CHAOS üö®</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* --- GLOBAL CHAOS --- */
        body {
            margin: 0;
            background-color: #000;
            color: lime;
            font-family: 'Impact', sans-serif;
            overflow: hidden;
            cursor: crosshair;
            user-select: none;
        }

        /* FULLSCREEN BACKGROUND ANIMATION */
        .bg-chaos {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: repeating-linear-gradient(
                45deg,
                #000,
                #000 10px,
                #111 10px,
                #111 20px
            );
            z-index: -2;
            animation: bg-shift 1s linear infinite;
        }
        @keyframes bg-shift { 0% { background-position: 0 0; } 100% { background-position: 50px 50px; } }

        /* CRT SCANLINES */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 4px, 6px 100%;
            pointer-events: none;
            z-index: 1000;
        }

        /* --- THE FLASHBANG OVERLAY --- */
        #flash-whiteout {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: white;
            opacity: 0;
            pointer-events: none;
            z-index: 9999;
        }
        .blind { animation: flash-blind 4s ease-out forwards; }
        @keyframes flash-blind {
            0% { opacity: 1; }
            10% { opacity: 1; } /* Hold white */
            100% { opacity: 0; }
        }

        /* --- UI ELEMENTS --- */
        .container {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; width: 100vw;
            position: relative; z-index: 10;
        }

        h1 {
            font-size: 5rem;
            text-transform: uppercase;
            text-shadow: 5px 5px 0px red;
            animation: shake 0.5s infinite;
        }

        .btn {
            background: red; border: 5px solid yellow; color: white;
            font-size: 2rem; padding: 25px 50px;
            font-family: 'Impact'; letter-spacing: 2px;
            cursor: pointer; box-shadow: 0 0 20px red;
            transition: 0.1s;
        }
        .btn:active { transform: scale(0.9); }
        .btn:hover { background: blue; border-color: white; transform: rotate(-2deg) scale(1.1); }

        /* --- FLOATING EFFECTS --- */
        .float-text {
            position: absolute; font-weight: bold; pointer-events: none;
            text-shadow: 2px 2px 0 #000;
            animation: floatUp 1s forwards;
            z-index: 500;
        }
        @keyframes floatUp { 0% { transform: translateY(0) scale(1); opacity: 1;} 100% { transform: translateY(-100px) scale(1.5) rotate(20deg); opacity: 0;} }

        /* --- GRENADE SVG --- */
        #grenade-svg {
            position: fixed; bottom: -200px; right: -200px; width: 150px; z-index: 5000; display: none;
        }
        .throw { display: block !important; animation: throw-anim 1s forwards; }
        @keyframes throw-anim {
            0% { bottom: -100px; right: -100px; transform: rotate(0deg); }
            50% { bottom: 50%; right: 50%; transform: scale(2) rotate(-360deg); }
            100% { bottom: 50%; right: 50%; transform: scale(3) rotate(-720deg); }
        }

        /* --- ANIMATIONS --- */
        @keyframes shake { 0% {transform: translate(1px, 1px);} 50% {transform: translate(-1px, -1px);} 100% {transform: translate(1px, -1px);} }
        .hidden { display: none !important; }

        /* --- GAME CANVAS --- */
        #game-canvas { background: #222; border: 5px solid lime; box-shadow: 0 0 50px lime; }

    </style>
</head>
<body>

    <div class="bg-chaos"></div>
    <div class="scanlines"></div>
    <div id="flash-whiteout"></div>
    
    <svg id="grenade-svg" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
        <rect x="30" y="50" width="40" height="100" rx="5" fill="#333" stroke="white" stroke-width="2"/>
        <rect x="25" y="40" width="50" height="15" fill="#ccc" stroke="white"/>
        <circle cx="75" cy="45" r="8" fill="none" stroke="red" stroke-width="3"/>
        <text x="35" y="100" fill="white" font-weight="bold" font-family="Arial">M84</text>
        <rect x="30" y="70" width="40" height="5" fill="red"/>
    </svg>

    <div id="intro" class="container">
        <h1>‚ö†Ô∏è EPILEPSY WARNING ‚ö†Ô∏è</h1>
        <h2 style="color: yellow;">FULLSCREEN FLASHBANG SIMULATOR</h2>
        <p>Turn Volume to 100%</p>
        <button class="btn" onclick="initChaos()">CLICK TO START</button>
    </div>

    <div id="game-ui" class="container hidden">
        <h1 style="font-size: 3rem; color: cyan;">GEOMETRY BRAINROT</h1>
        <p>TAP TO JUMP</p>
        <canvas id="game-canvas" width="600" height="300"></canvas>
        <h3 id="score">SCORE: 0</h3>
    </div>

    <div id="quiz-ui" class="container hidden">
        <h1 style="color:orange;">THE INTERROGATION</h1>
        <h2 id="q-text" style="background:black; padding:10px;">...</h2>
        <div id="q-opts"></div>
    </div>

    <div id="outro" class="container hidden">
        <h1 class="shake" style="font-size: 6rem;">MISSION COMPLETE</h1>
        <div style="font-size: 4rem; font-weight: bold; line-height: 1.5; text-transform: uppercase;">
            <div style="color: #fff;">üçï EAT PIZZA</div>
            <div style="color: #ddd;">üò¥ SLEEP</div>
            <div style="color: red; font-size: 6rem; text-shadow: 0 0 20px red;">üëπ GOON</div>
            <div style="color: lime;">üîÅ REPEAT</div>
        </div>
        <button class="btn" onclick="location.reload()" style="margin-top:20px;">PRESTIGE</button>
    </div>

    <script>
        // --- AUDIO ENGINE (WEB AUDIO API) ---
        let audioCtx;
        const synth = window.speechSynthesis;

        function initAudio() {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            audioCtx = new AudioContext();
            if(audioCtx.state === 'suspended') audioCtx.resume();
        }

        // 1. GENERATE FLASHBANG SOUND (White Noise + Sine Ring)
        function playFlashAudio() {
            const t = audioCtx.currentTime;
            
            // Boom/Hiss
            const bufSize = audioCtx.sampleRate * 3; 
            const buffer = audioCtx.createBuffer(1, bufSize, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            for(let i=0; i<bufSize; i++) data[i] = Math.random() * 2 - 1;

            const noise = audioCtx.createBufferSource();
            noise.buffer = buffer;
            const noiseGain = audioCtx.createGain();
            noiseGain.gain.setValueAtTime(1, t);
            noiseGain.gain.exponentialRampToValueAtTime(0.01, t + 2);
            noise.connect(noiseGain); noiseGain.connect(audioCtx.destination);
            noise.start();

            // Tinnitus Ring (High Pitch)
            const osc = audioCtx.createOscillator();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(3000, t);
            const oscGain = audioCtx.createGain();
            oscGain.gain.setValueAtTime(0.05, t); // Start volume
            oscGain.gain.linearRampToValueAtTime(0.1, t + 0.1); // Fade in
            oscGain.gain.exponentialRampToValueAtTime(0.001, t + 5); // Ring for 5s
            osc.connect(oscGain); oscGain.connect(audioCtx.destination);
            osc.start(); osc.stop(t + 5);
        }

        // 2. MEME VOICES
        function speak(text, type="normal") {
            if(synth.speaking) synth.cancel();
            const u = new SpeechSynthesisUtterance(text);
            u.volume = 1; 
            if(type==="demon") { u.pitch = 0.1; u.rate = 0.8; }
            else if(type==="chipmunk") { u.pitch = 2; u.rate = 1.5; }
            else { u.pitch = 1; u.rate = 1.2; }
            synth.speak(u);
            spawnText(text); // Also show it on screen
        }

        // --- VISUAL FX ---
        function spawnText(txt) {
            const el = document.createElement('div');
            el.className = 'float-text';
            el.innerText = txt;
            el.style.left = Math.random() * 80 + 'vw';
            el.style.top = Math.random() * 80 + 'vh';
            el.style.color = `hsl(${Math.random()*360}, 100%, 50%)`;
            el.style.fontSize = (Math.random()*2 + 2) + 'rem';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 1000);
        }

        function triggerFlashbang(callback) {
            const gren = document.getElementById('grenade-svg');
            const overlay = document.getElementById('flash-whiteout');
            
            // 1. Throw
            gren.classList.add('throw');
            
            // 2. Boom
            setTimeout(() => {
                gren.style.display = 'none'; // Hide grenade
                overlay.classList.add('blind'); // White screen
                playFlashAudio(); // Sound
                
                // 3. Reset
                setTimeout(() => {
                    overlay.classList.remove('blind');
                    gren.classList.remove('throw');
                    gren.style.display = ''; 
                    if(callback) callback();
                }, 4000);
            }, 1000);
        }

        // --- CORE SYSTEM ---
        function initChaos() {
            // FORCE FULLSCREEN
            const elem = document.documentElement;
            if (elem.requestFullscreen) { elem.requestFullscreen(); }
            
            initAudio();
            speak("Tactical Nuke Incoming", "demon");
            
            document.getElementById('intro').classList.add('hidden');
            document.getElementById('game-ui').classList.remove('hidden');
            startGame();

            // Start random visual noise loop
            setInterval(() => {
                if(Math.random() > 0.8) spawnText(["üçï", "üíÄ", "üöΩ", "WOW", "HITMARKER"][Math.floor(Math.random()*5)]);
            }, 500);
        }

        // --- GAME LOGIC ---
        let canvas, ctx, gameLoop;
        let player = {y:200, dy:0, grounded:false};
        let obstacles = [];
        let score = 0;
        let active = false;

        function startGame() {
            canvas = document.getElementById('game-canvas');
            ctx = canvas.getContext('2d');
            active = true;
            document.body.onmousedown = jump;
            document.body.onkeydown = (e) => { if(e.code==='Space') jump(); };
            loop();
        }

        function jump() {
            if(player.grounded) {
                player.dy = -12; player.grounded = false;
                spawnText("BOING");
            }
        }

        function loop() {
            if(!active) return;
            requestAnimationFrame(loop);
            ctx.clearRect(0,0,600,300);

            // Player
            player.dy += 0.6; player.y += player.dy;
            if(player.y > 250) { player.y = 250; player.grounded = true; }
            ctx.fillStyle = 'cyan'; ctx.fillRect(50, player.y, 40, 40);

            // Spikes
            if(Math.random() < 0.02) obstacles.push({x:600});
            obstacles.forEach(o => {
                o.x -= 6;
                ctx.fillStyle = 'red';
                ctx.beginPath(); ctx.moveTo(o.x, 290); ctx.lineTo(o.x+20, 240); ctx.lineTo(o.x+40, 290); ctx.fill();

                if(o.x < 90 && o.x > 10 && player.y > 210) {
                    // DIE -> FLASHBANG
                    active = false;
                    speak("GET FLASHED IDIOT", "demon");
                    triggerFlashbang(() => {
                        obstacles = []; score = 0; active = true; loop();
                    });
                }
            });
            obstacles = obstacles.filter(o => o.x > -50);

            score++;
            document.getElementById('score').innerText = "SCORE: " + score;

            if(score > 500) {
                active = false;
                startQuiz();
            }
        }

        // --- QUIZ ---
        function startQuiz() {
            document.getElementById('game-ui').classList.add('hidden');
            document.getElementById('quiz-ui').classList.remove('hidden');
            speak("Welcome to Ohio", "demon");
            
            const q = {q:"WHAT IS THE BEST FOOD?", a: ["PIZZA", "ROCKS", "SALAD"], c:0};
            document.getElementById('q-text').innerText = q.q;
            
            const d = document.getElementById('q-opts');
            q.a.forEach((opt, i) => {
                const b = document.createElement('button');
                b.className = 'btn'; b.style.margin = '10px'; b.innerText = opt;
                b.onclick = () => {
                    if(i === q.c) {
                        speak("OH BABY A TRIPLE", "chipmunk");
                        endGame();
                    } else {
                        triggerFlashbang();
                        speak("WRONG", "demon");
                    }
                };
                d.appendChild(b);
            });
        }

        // --- END ---
        function endGame() {
            document.getElementById('quiz-ui').classList.add('hidden');
            document.getElementById('outro').classList.remove('hidden');
            
            const words = ["Eat Pizza", "Sleep", "Goon", "Repeat"];
            let i = 0;
            setInterval(() => {
                // Chaotic background color change
                document.body.style.filter = `hue-rotate(${Math.random()*360}deg)`;
                
                let w = words[i];
                if(w === "Goon") speak(w, "demon");
                else speak(w, "chipmunk");
                
                i = (i+1)%4;
            }, 1000);
        }

    </script>
</body>
</html>
