<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üì∫ RETRO_RIZZ_OVERLOAD üì∫</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* --- CORE RETRO & CHAOS STYLES --- */
        :root {
            --neon-green: #39ff14;
            --neon-pink: #ff00ff;
        }

        body {
            margin: 0;
            background-color: #050505;
            color: var(--neon-green);
            font-family: 'Press Start 2P', cursive; /* Pixel Font */
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            user-select: none;
            cursor: crosshair;
            text-transform: uppercase;
        }

        /* --- RETRO CRT EFFECTS --- */
        /* Scanlines and curvature */
        body::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 998;
            background-size: 100% 4px, 4px 100%;
            pointer-events: none;
            box-shadow: inset 0 0 100px black; /* Vignette */
        }

        /* Static Noise Overlay */
        .static-noise {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWDg4N3d3dtbW17e3t1dXV0dHR4eHh2dnZ6enp8fHx5eXl/f39+fn5\9fX1zc3Nvb29sbGxra2toaGhnZ2dlZWVkZGRiYmJjY2NxcXFpQpq6AAAAPElEQVR42u3SMQ4AIAgDQLHg/z92FhZ1AgNb070kE3J5a7X699r9r+2+195/be+99v5re++1919777X3X9v7B0ECX0n4FhAAAAAASUVORK5CYII=');
            opacity: 0.05;
            pointer-events: none;
            z-index: 997;
            animation: noiseAnim 0.2s infinite;
        }
        @keyframes noiseAnim { 0% {background-position: 0 0;} 100% {background-position: 100px 100px;} }

        /* Chromatic Aberration (RGB Split) text effect */
        .rgb-text {
            text-shadow: -2px 0 red, 2px 0 blue;
        }

        /* --- FLASHBANG & STROBE EFFECTS --- */
        @keyframes flashFade {
            0% { background-color: white; opacity: 1; }
            100% { background-color: transparent; opacity: 0; }
        }
        .flashbang-overlay {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background-color: white;
            z-index: 9999;
            display: none;
        }
        .flash-active {
            display: block;
            animation: flashFade 4s forwards;
        }

        @keyframes strobe-anim {
            0% { background-color: red; } 50% { background-color: blue; } 100% { background-color: red; }
        }
        .strobe-mode { animation: strobe-anim 0.1s infinite; }

        /* --- UI CONTAINERS --- */
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }

        h1 { font-size: 2.5rem; margin-bottom: 20px; letter-spacing: 2px; line-height: 1.2; }
        h2 { font-size: 1.5rem; color: var(--neon-pink); }

        .btn {
            background: black;
            border: 4px solid var(--neon-green);
            color: var(--neon-green);
            font-size: 1.2rem;
            padding: 15px 25px;
            font-family: 'Press Start 2P', cursive;
            cursor: pointer;
            box-shadow: 5px 5px 0px var(--neon-pink);
            transition: 0.1s;
            margin-top: 20px;
        }
        .btn:active { transform: translate(4px, 4px); box-shadow: 1px 1px 0px var(--neon-pink); background: var(--neon-green); color: black;}

        /* --- GAME SPECIFIC CSS --- */
        #game-canvas { border: 4px solid var(--neon-pink); background: #111; box-shadow: 0 0 20px var(--neon-pink); }
        
        /* Whack-a-Mole Grid */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            gap: 10px;
            margin: 20px;
        }
        .grid-box {
            width: 100px; height: 100px;
            background: #222;
            border: 2px solid #444;
            display: flex; justify-content: center; align-items: center;
            font-size: 3rem;
            cursor: pointer;
        }
        .grid-active { background: var(--neon-green); border-color: white; }

        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="static-noise"></div>
    <div id="flash-overlay" class="flashbang-overlay"></div>

    <div id="intro" class="container">
        <h1 class="rgb-text shake-hard" style="color: red;">‚ö†Ô∏è WARNING ‚ö†Ô∏è<br>EPILEPSY HAZARD</h1>
        <p>Retro Brainrot Simulator v9000</p>
        <p style="font-size: 0.8rem; margin-top: 20px;">Full volume required for maximum Ohio Rizz.</p>
        <button class="btn" onclick="startGameSequence()">INSERT COIN</button>
    </div>

    <div id="geo-dash-ui" class="container hidden">
        <h2>STAGE 1: PIZZA DASH</h2>
        <canvas id="game-canvas" width="600" height="300"></canvas>
        <h3 id="geo-score">SCORE: 0 / 400</h3>
    </div>

    <div id="whack-ui" class="container hidden">
        <h2 class="rgb-text">STAGE 2: WHACK-A-GOON</h2>
        <p>CLICK THE MEMES FAST!</p>
        <h3 id="whack-timer">TIME: 15s</h3>
        <div class="grid-container" id="whack-grid">
            </div>
        <h3 id="whack-score">SCORE: 0</h3>
    </div>

    <div id="quiz-ui" class="container hidden">
        <h1 class="rgb-text">THE IMPOSSIBLE QUIZ ü§å</h1>
        <h2 id="q-text" style="font-size: 1rem; margin: 20px;">LOADING...</h2>
        <div id="q-options" style="display: flex; flex-direction: column; gap: 10px; width: 80%;"></div>
    </div>

    <div id="ending-ui" class="container hidden">
        <h1 style="color:red; font-size: 3rem;" class="rgb-text shake-hard">SYSTEM ASCENSION</h1>
        <div style="font-size: 2rem; line-height: 2; border: 4px dashed var(--neon-pink); padding: 20px;">
            <div id="txt1">üçï EAT PIZZA</div>
            <div id="txt2">üò¥ SLEEP</div>
            <div id="txt3" style="color: red;">üëπ GOON</div>
            <div id="txt4">üîÅ REPEAT</div>
        </div>
        <button class="btn" onclick="location.reload()">RESET UNIVERSE</button>
    </div>

    <script>
        const synth = window.speechSynthesis;
        let gameState = {};

        // --- AUDIO ENGINE ---
        function sfx(text, rate=1.2, pitch=0.8, vol=1) {
            if (synth.speaking) synth.cancel();
            const u = new SpeechSynthesisUtterance(text);
            u.rate = rate; u.pitch = pitch; u.volume = vol;
            synth.speak(u);
        }

        function triggerFlashbang() {
            synth.cancel();
            // High pitched tinnitus ringing
            sfx("EEEEEEEEEEEEEEEEEEEEEEEEEEEEE", 2, 2, 0.3);
            const overlay = document.getElementById('flash-overlay');
            overlay.classList.add('flash-active');
            setTimeout(() => {
                overlay.classList.remove('flash-active');
            }, 4000);
        }

        function startGameSequence() {
            document.getElementById('intro').classList.add('hidden');
            sfx("Welcome to the Ohio Zone. Get ready.");
            startGeoDash();
        }

        // --- GAME 1: GEO DASH (Simplified for stability) ---
        function startGeoDash() {
            document.getElementById('geo-dash-ui').classList.remove('hidden');
            const canvas = document.getElementById('game-canvas');
            const ctx = canvas.getContext('2d');
            let player = { y: 250, dy: 0, grounded: true };
            let obstacles = []; let score = 0; let active = true; frame=0;

            document.body.onkeydown = document.body.ontouchstart = jump;

            function jump() { if(player.grounded) { player.dy = -15; player.grounded=false; sfx("Hup!", 3); }}

            function loop() {
                if(!active) return;
                requestAnimationFrame(loop);
                ctx.fillStyle = '#111'; ctx.fillRect(0,0,600,300);
                
                player.dy += 1.2; player.y += player.dy; // Gravity
                if(player.y > 250) { player.y = 250; player.grounded = true; }
                
                ctx.fillStyle = 'cyan'; ctx.fillRect(50, player.y, 30, 30); // Player

                frame++;
                if(frame%70===0) obstacles.push({x:600, w:30, h:40});

                ctx.fillStyle = 'red';
                obstacles.forEach((ob, i) => {
                    ob.x -= 8;
                    ctx.fillRect(ob.x, 300-ob.h, ob.w, ob.h);
                    // Collision (Simplified box)
                    if(50 < ob.x + ob.w && 80 > ob.x && player.y + 30 > 300 - ob.h) {
                         sfx("Skill issue. Reset."); score=0; obstacles=[];
                         document.body.classList.add('strobe-mode');
                         setTimeout(()=>document.body.classList.remove('strobe-mode'), 500);
                    }
                });
                score++; document.getElementById('geo-score').innerText = `SCORE: ${score}/400`;
                if(score > 400) { active=false; document.body.onkeydown = null; transitionToWhack(); }
            }
            loop();
        }

        function transitionToWhack() {
            document.getElementById('geo-dash-ui').classList.add('hidden');
            triggerFlashbang();
            setTimeout(startWhackGame, 2500);
        }

        // --- GAME 2: WHACK-A-GOON ---
        function startWhackGame() {
            document.getElementById('whack-ui').classList.remove('hidden');
            sfx("Stage 2. Whack the Goons.");
            const grid = document.getElementById('whack-grid');
            for(let i=0; i<9; i++) {
                let box = document.createElement('div'); box.className = 'grid-box'; box.id = 'box-'+i;
                box.onclick = () => hitBox(i);
                grid.appendChild(box);
            }
            gameState.whackScore = 0;
            gameState.timeLeft = 15;
            gameState.activeMole = -1;
            
            let timerInt = setInterval(() => {
                gameState.timeLeft--;
                document.getElementById('whack-timer').innerText = `TIME: ${gameState.timeLeft}s`;
                if(gameState.timeLeft <= 0) {
                    clearInterval(timerInt); clearInterval(moleInt);
                    transitionToQuiz();
                }
            }, 1000);

            let moleInt = setInterval(showMole, 600);
        }

        function showMole() {
            if(gameState.activeMole !== -1) document.getElementById('box-'+gameState.activeMole).innerHTML = '';
            gameState.activeMole = Math.floor(Math.random() * 9);
            const memes = ["ü§°", "üíÄ", "üí©", "üëΩ"];
            document.getElementById('box-'+gameState.activeMole).innerHTML = memes[Math.floor(Math.random()*memes.length)];
        }
        function hitBox(i) {
            if(i === gameState.activeMole) {
                gameState.whackScore++;
                document.getElementById('whack-score').innerText = "SCORE: " + gameState.whackScore;
                document.getElementById('box-'+i).innerHTML = ''; gameState.activeMole = -1;
                sfx("Bonk!", 3);
            }
        }
        
        function transitionToQuiz() {
             document.getElementById('whack-grid').innerHTML = ''; // clear grid
             document.getElementById('whack-ui').classList.add('hidden');
             triggerFlashbang();
             setTimeout(startQuiz, 2500);
        }


        // --- GAME 3: EXPANDED QUIZ ---
        const quizData = [
            { q: "COMPLETE: 'I COOKA DA ____'", o: ["PIZZA", "MEATBALL", "FANUM TAX"], a: 1 },
            { q: "WHAT DOES 'GYATT' MEAN?", o: ["LEVEL 10 RIZZ", "A NICE PERSON", "BIG CAKE"], a: 2 },
            { q: "WHO IS THE RIZZLER?", o: ["SKIBIDI TOILET", "DUKE DENNIS", "BABY GRONK"], a: 1 },
            { q: "IS OHIO REAL?", o: ["YES", "NO (IT'S A SIMULATION)", "ONLY AT 3AM"], a: 1 },
            { q: "SHOULD YOU SLEEP?", o: ["NO, MUST GRIND", "YES (BETA MALE)", "ONLY POWER NAPS"], a: 0 }
        ];
        let qIdx = 0;

        function startQuiz() {
            document.getElementById('quiz-ui').classList.remove('hidden');
            sfx("Final Stage. The Interrogation.", 0.8);
            loadQuestion();
        }

        function loadQuestion() {
            if(qIdx >= quizData.length) { startEnding(); return; }
            const data = quizData[qIdx];
            document.getElementById('q-text').innerText = data.q;
            const div = document.getElementById('q-options'); div.innerHTML = '';
            data.o.forEach((opt, i) => {
                const btn = document.createElement('button'); btn.className = "btn";
                btn.style.marginTop = "5px"; btn.innerText = opt; btn.onclick = ()=>check(i, data.a);
                div.appendChild(btn);
            });
        }

        function check(c, a) {
            if(c===a) { sfx("Correct.", 2); qIdx++; loadQuestion(); }
            else { 
                sfx("WRONG. MINUS 1000 SOCIAL CREDIT.", 1, 0.5);
                document.body.classList.add('strobe-mode');
                setTimeout(()=>document.body.classList.remove('strobe-mode'), 1000);
            }
        }

        // --- ENDING ---
        function startEnding() {
            document.getElementById('quiz-ui').classList.add('hidden');
            triggerFlashbang();
            setTimeout(() => {
                 document.getElementById('ending-ui').classList.remove('hidden');
                 sfx("Eat Pizza. Sleep. Goon. Repeat. The cycle continues.", 0.7, 0.6);
                 setInterval(() => { document.body.style.filter = `hue-rotate(${Math.random() * 360}deg) contrast(150%)`; }, 200);
            }, 3000);
        }

    </script>
</body>
</html>
