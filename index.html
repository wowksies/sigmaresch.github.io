<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üçï SKIBIDI_OHIO_MAX_VOLUME üöΩ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* --- CORE CHAOS --- */
        body {
            margin: 0;
            background-color: #000;
            /* CHAOTIC BACKGROUND PATTERN (Pizza & Toilet Data URIs) */
            background-image: 
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 100 100"><text y="50" font-size="40">üçï</text></svg>'),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 100 100"><text y="50" font-size="40">üöΩ</text></svg>');
            background-repeat: repeat, repeat;
            background-position: 0 0, 30px 30px;
            animation: bg-scroll 2s linear infinite;
            color: lime;
            font-family: 'Impact', 'Comic Sans MS', sans-serif;
            overflow: hidden;
            user-select: none;
            cursor: crosshair;
            perspective: 1000px; /* For 3D effects */
        }

        @keyframes bg-scroll {
            0% { background-position: 0 0, 30px 30px; }
            100% { background-position: 100px 100px, 130px 130px; }
        }

        /* CRT SCANLINE OVERLAY */
        body::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 998;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        /* FLASHBANG OVERLAY */
        #flashbang-overlay {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: white;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease-out;
        }
        .flashing-now { opacity: 1 !important; transition: none !important; }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            width: 100vw;
            text-align: center;
            background: rgba(0,0,0,0.7); /* Darken bg for readability */
            backdrop-filter: blur(5px);
        }

        /* --- TEXT & BUTTONS --- */
        h1 { font-size: 4rem; text-transform: uppercase; margin: 0; letter-spacing: 5px; text-shadow: 3px 3px 0 red, -3px -3px 0 blue; }
        
        .btn {
            background: red; border: 5px solid yellow; color: white;
            font-size: 2rem; padding: 20px; font-family: 'Comic Sans MS'; font-weight: bold;
            cursor: pointer; box-shadow: 10px 10px 0px blue; transition: 0.1s;
        }
        .btn:active { transform: translate(5px, 5px); box-shadow: 5px 5px 0px blue; }

        /* --- GEO DASH CANVAS --- */
        #game-canvas { background: #111; border-bottom: 10px solid white; display: none; box-shadow: 0 0 30px lime; }
        
        /* --- QUIZ --- */
        .quiz-option {
            display: block; width: 80%; margin: 10px auto; background: blue; color: white;
            font-size: 1.5rem; border: 3px solid white; cursor: pointer; padding: 10px;
        }
        .quiz-option:hover { background: gold; color: black; transform: scale(1.05) rotate(-2deg); }

        /* --- ENDING 3D CHAOS --- */
        @keyframes spin-3d-crazy {
            0% { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); color: red; }
            25% { transform: rotateX(180deg) rotateY(90deg) rotateZ(-45deg) scale(1.2); color: blue; }
            50% { transform: rotateX(360deg) rotateY(180deg) rotateZ(0deg) scale(0.8); color: lime; border-color: red;}
            75% { transform: rotateX(540deg) rotateY(270deg) rotateZ(45deg) scale(1.5); color: yellow; }
            100% { transform: rotateX(720deg) rotateY(360deg) rotateZ(0deg) scale(1); color: red; }
        }
        .spin-3d {
            animation: spin-3d-crazy 2s infinite linear;
            transform-style: preserve-3d;
            border: 5px dashed white;
            padding: 20px;
            background: rgba(0,0,0,0.5);
        }
        
        @keyframes seizure-bg {
            0% { background-color: red; filter: invert(0); }
            50% { background-color: blue; filter: invert(1); }
            100% { background-color: green; filter: invert(0); }
        }
        .seizure-mode { animation: seizure-bg 0.1s infinite; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="flashbang-overlay"></div>

    <div id="intro" class="container">
        <h1 style="color: yellow;">‚ö†Ô∏è WARNING ‚ö†Ô∏è</h1>
        <h2>LOUD SOUNDS & FLASHING LIGHTS</h2>
        <p>FULL SCREEN BRAINROT INCOMING</p>
        <button class="btn" onclick="startGame()">START THE GRINDSET (FULLSCREEN)</button>
    </div>

    <div id="geo-dash-ui" class="container hidden">
        <h2>LEVEL 1: GEOMETRY PIZZA DASH</h2>
        <canvas id="game-canvas" width="600" height="300"></canvas>
        <h3 id="geo-score">SCORE: 0 / 500</h3>
    </div>

    <div id="quiz-ui" class="container hidden">
        <h1>ü§å THE IMPOSSIBLE ITALIAN QUIZ ü§å</h1>
        <h2 id="q-text">LOADING...</h2>
        <div id="q-options" style="width: 100%;"></div>
    </div>

    <div id="ending-ui" class="container hidden" style="perspective: 1000px;">
        <div class="spin-3d">
            <h1 style="color:red; font-size: 4rem; text-shadow: 5px 5px 0 black;">GOON CAVE UNLOCKED</h1>
            <div style="font-size: 3rem; line-height: 1.5; font-weight: bold; text-transform: uppercase;">
                <div>üçï EAT PIZZA</div>
                <div>üò¥ SLEEP</div>
                <div style="color: red; text-shadow: 0 0 20px red;">üëπ GOON</div>
                <div>üîÅ REPEAT</div>
            </div>
        </div>
        <br>
        <button class="btn" onclick="location.reload()">PRESTIGE RESET</button>
    </div>

    <script>
        // --- AUDIO ENGINE ---
        const synth = window.speechSynthesis;
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function sfx(text, rate=1.5, pitch=1.0) {
            if (synth.speaking) synth.cancel();
            const u = new SpeechSynthesisUtterance(text);
            u.rate = rate; u.pitch = pitch; u.volume = 1;
            synth.speak(u);
        }

        // REAL FLASHBANG SOUND (Web Audio API Noise)
        function playFlashBangSound() {
            const bufferSize = 2 * audioCtx.sampleRate;
            const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const output = noiseBuffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) {
                output[i] = Math.random() * 2 - 1; // White noise
            }
            const whiteNoise = audioCtx.createBufferSource();
            whiteNoise.buffer = noiseBuffer;
            const noiseGain = audioCtx.createGain();
            noiseGain.gain.setValueAtTime(1, audioCtx.currentTime);
            noiseGain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            whiteNoise.connect(noiseGain);
            noiseGain.connect(audioCtx.destination);
            whiteNoise.start();
            whiteNoise.stop(audioCtx.currentTime + 0.5);

            // High pitch ring
            const oscillator = audioCtx.createOscillator();
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(1500, audioCtx.currentTime); // 1500Hz tone
            const oscGain = audioCtx.createGain();
            oscGain.gain.setValueAtTime(0.3, audioCtx.currentTime);
            oscGain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 2);
            oscillator.connect(oscGain);
            oscGain.connect(audioCtx.destination);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 2);
        }

        function triggerFlashbang() {
            playFlashBangSound();
            const fb = document.getElementById('flashbang-overlay');
            fb.classList.add('flashing-now');
            // Force reflow
            void fb.offsetWidth; 
            setTimeout(() => {
                 fb.classList.remove('flashing-now');
            }, 50); // Short burst then fade out via CSS transition
        }

        // --- GLOBAL STATE ---
        function startGame() {
            // FULL SCREEN ACTIVATION
            document.documentElement.requestFullscreen().catch((e) => {
                console.log("Fullscreen denied, continuing anyway.");
            });

            document.getElementById('intro').classList.add('hidden');
            document.getElementById('geo-dash-ui').classList.remove('hidden');
            sfx("Lets go gamers. Skibidi Geo Dash initiated.", 1.2);
            initGeoDash();
        }

        // --- STEP 2: GEO DASH ---
        let canvas, ctx, gameLoop;
        let player = { x: 50, y: 200, w: 30, h: 30, dy: 0, jumpPower: -12, grounded: false };
        let gravity = 0.8;
        let obstacles = [];
        let gameScore = 0;
        let gameActive = false;
        let frameCount = 0;

        function initGeoDash() {
            canvas = document.getElementById('game-canvas');
            canvas.style.display = "block";
            ctx = canvas.getContext('2d');
            gameActive = true;
            document.body.onkeydown = (e) => { if(e.code === 'Space') jump(); };
            document.body.ontouchstart = jump;
            document.body.onclick = jump;
            loop();
        }

        function jump() {
            if(player.grounded) {
                player.dy = player.jumpPower; player.grounded = false;
            }
        }

        function loop() {
            if (!gameActive) return;
            requestAnimationFrame(loop);
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            player.dy += gravity; player.y += player.dy;
            if (player.y + player.h > canvas.height) { player.y = canvas.height - player.h; player.dy = 0; player.grounded = true; }

            // Draw Player (Pizza Cube)
            ctx.fillStyle = "orange"; ctx.fillRect(player.x, player.y, player.w, player.h);
            ctx.fillStyle = "red"; ctx.beginPath(); ctx.arc(player.x+15, player.y+15, 5, 0, 2*Math.PI); ctx.fill(); // pepperoni

            frameCount++;
            if (frameCount % 90 === 0) obstacles.push({ x: canvas.width, w: 30, h: 40 });

            ctx.fillStyle = "red";
            for (let i = 0; i < obstacles.length; i++) {
                let obs = obstacles[i]; obs.x -= 6;
                ctx.beginPath(); ctx.moveTo(obs.x, canvas.height); ctx.lineTo(obs.x + obs.w/2, canvas.height - obs.h); ctx.lineTo(obs.x + obs.w, canvas.height); ctx.fill();
                if (player.x < obs.x + obs.w && player.x + player.w > obs.x && player.y < canvas.height && player.y + player.h > canvas.height - obs.h) {
                        triggerFlashbang();
                        sfx("Skill issue. Restarting.", 2);
                        gameScore = 0; obstacles = []; frameCount = 0;
                }
            }
            obstacles = obstacles.filter(o => o.x > -50);
            gameScore++; document.getElementById('geo-score').innerText = `SCORE: ${gameScore} / 500`;

            if (gameScore > 500) {
                gameActive = false;
                sfx("Oh baby a triple! Level Complete!", 1.5);
                setTimeout(startQuiz, 1000);
            }
        }

        // --- STEP 3: QUIZ ---
        const quizData = [
            { q: "DOES PINEAPPLE BELONG ON PIZZA?", opts: ["YES (I am cringe)", "NO (I am Sigma)", "MAYBE"], a: 1 },
            { q: "WHAT DOES 'FANUM TAX' MEAN?", opts: ["Stealing food", "Paying taxes", "Skibidi toilet"], a: 0 },
            { q: "TRANSLATE: ü§å", opts: ["Hello", "What do you want?", "Spaghetti"], a: 1 }
        ];
        let qIdx = 0;

        function startQuiz() {
            document.getElementById('geo-dash-ui').classList.add('hidden');
            document.getElementById('quiz-ui').classList.remove('hidden');
            document.body.onclick = null; document.body.onkeydown = null;
            loadQuestion();
        }

        function loadQuestion() {
            if (qIdx >= quizData.length) { startEnding(); return; }
            const data = quizData[qIdx];
            document.getElementById('q-text').innerText = data.q;
            sfx(data.q, 1.3);
            const div = document.getElementById('q-options'); div.innerHTML = '';
            data.opts.forEach((opt, i) => {
                const btn = document.createElement('button'); btn.innerText = opt; btn.className = "quiz-option";
                btn.onclick = () => checkAnswer(i, data.a); div.appendChild(btn);
            });
        }

        function checkAnswer(chosen, correct) {
            if (chosen === correct) {
                sfx("Mamma mia that is correct!", 1.5); qIdx++; loadQuestion();
            } else {
                triggerFlashbang(); // PUNISHMENT
                sfx("NOT VERY CASH MONEY OF YOU.", 1.8);
            }
        }

        // --- STEP 4: 3D ENDING CHAOS ---
        function startEnding() {
            document.getElementById('quiz-ui').classList.add('hidden');
            const endUI = document.getElementById('ending-ui');
            endUI.classList.remove('hidden');
            
            // ACTIVATE MAXIMUM CHAOS MODES
            document.body.classList.add('seizure-mode');
            
            let mantra = ["Eat Pizza", "Sleep", "Goon", "Repeat"];
            let i = 0;
            setInterval(() => {
                sfx(mantra[i], i===2 ? 0.5 : 1.5); i = (i + 1) % mantra.length;
            }, 1200);
        }

    </script>
</body>
</html>
